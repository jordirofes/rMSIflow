wdir <- "C:/Users/jordi/Desktop/Metabolomica/Projecte MALDI/CollCap/"
peakData <- "mergeddata-peaks.zip"
peakMatrix <- rMSIproc::LoadPeakMatrix(file.path(wdir, peakData))
dataNormTic <- peakMatrix$intensity/peakMatrix$normalizations$TIC ### Dividim les intensitats pel factor de normalització TIC
clData <- vector(mode = "list",length = length(peakMatrix$numPixels))
for (i in 1:length(peakMatrix$numPixels)){                                                      ### Fem un Kmeans per a cada
if (i == 1)                                                                                    ### imatge
{
clData[i] <- kmeans(dataNormTic[1:peakMatrix$numPixels[i], ], 2)
}
if (i != 1)
{
clData[i] <- kmeans(dataNormTic[peakMatrix$numPixels[i-1]+1:peakMatrix$numPixels[i], ], 2)
}
}
View(clData)
?kmeans
clData
clData[1]
View(clData)
clData <- vector(mode = "list",length = length(peakMatrix$numPixels))
for (i in 1:length(peakMatrix$numPixels)){                                                      ### Fem un Kmeans per a cada
if (i == 1)                                                                                    ### imatge
{
clData[i] <- list(kmeans(dataNormTic[1:peakMatrix$numPixels[i], ], 2)))
clData <- vector(mode = "list",length = length(peakMatrix$numPixels))
for (i in 1:length(peakMatrix$numPixels)){                                                      ### Fem un Kmeans per a cada
if (i == 1)                                                                                    ### imatge
{
clData[i] <- list(kmeans(dataNormTic[1:peakMatrix$numPixels[i], ], 2))
}
if (i != 1)
{
clData[i] <- list(kmeans(dataNormTic[peakMatrix$numPixels[i-1]+1:peakMatrix$numPixels[i], ], 2))
}
}
View(clData)
View(peakMatrix)
dataNormTic <- peakMatrix$intensity/peakMatrix$normalizations$TIC ### Dividim les intensitats pel factor de normalització TIC
clData <- vector(mode = "list",length = length(peakMatrix$numPixels))
for (i in 1:length(peakMatrix$numPixels)){
if (i == 1){
clData[i] <- list(kmeans(dataNormTic[1:peakMatrix$numPixels[i], ], 2))
} else {
clData[i] <- list(kmeans(dataNormTic[sum(peakMatrix$numPixels[1:(i-1)])+1:sum(peakMatrix$numPixels[1:i]), ], 2))
}
}
dataNormTic <- peakMatrix$intensity/peakMatrix$normalizations$TIC ### Dividim les intensitats pel factor de normalització TIC
clData <- vector(mode = "list",length = length(peakMatrix$numPixels))
for (i in 1:length(peakMatrix$numPixels)){
if (i == 1){
clData[i] <- list(kmeans(dataNormTic[1:peakMatrix$numPixels[i], ], 2))
} else {
clData[i] <- list(kmeans(dataNormTic[(sum(peakMatrix$numPixels[1:(i-1)])+1):sum(peakMatrix$numPixels[1:i]), ], 2))
}
}
View(clData)
view(clData)
View(clData)
?cbind
clData[1]
clData[1][1]
clData[1]$cluster
clData[[1]]
clData[[1]][1]
clData[[1:6]][1]
clData[[1:6]][1]
clData[[2]][1]
unlist(clData)
unlist(clData[[1]][1])
5333*634
View(dataNormTic)
View(clData)
lapply(clData, function(x){
return(x[1])
})
clusImages <- lapply(clData, function(x){
return(x[1])
})
clusImages <- lapply(clData, function(x){
return(x[1])
})
c(clusImages[1:length(clusImages)])
clusImages <- lapply(clData, function(x){
return(x[1])
})
allClusImages <- c(clusImages[1:length(clusImages)])
View(allClusImages)
View(clusImages)
clusImages <- lapply(clData, function(x){
return(x[1])
})
allClusImages <- unlist(clusImages)
View(clusImages)
clusImages <- lapply(clData, function(x){
return(x[1])
})
clusImages <- lapply(clData, function(x){
return(x[1])
})
dataNormTic <- peakMatrix$intensity/peakMatrix$normalizations$TIC ### Dividim les intensitats pel factor de normalització TIC
clData <- vector(mode = "list",length = length(peakMatrix$numPixels))
for (i in 1:length(peakMatrix$numPixels)){
if (i == 1){
clData[i] <- list(kmeans(dataNormTic[1:peakMatrix$numPixels[i], ], 2))
} else {
clData[i] <- list(kmeans(dataNormTic[(sum(peakMatrix$numPixels[1:(i-1)])+1):sum(peakMatrix$numPixels[1:i]), ], 2))
}
}
clusImages <- lapply(clData, function(x){
return(x[1])
})
allClusImages <- unlist(clusImages)
dataNormTic <- peakMatrix$intensity/peakMatrix$normalizations$TIC ### Dividim les intensitats pel factor de normalització TIC
clData <- vector(mode = "list",length = length(peakMatrix$numPixels))
for (i in 1:length(peakMatrix$numPixels)){
if (i == 1){
clData[i] <- list(kmeans(dataNormTic[1:peakMatrix$numPixels[i], ], 2))
} else {
clData[i] <- list(kmeans(dataNormTic[(sum(peakMatrix$numPixels[1:(i-1)])+1):sum(peakMatrix$numPixels[1:i]), ], 2))
}
}
clusImages <- lapply(clData, function(x){
return(x[1])
})
allClusImages <- unlist(clusImages)
rMSIproc::plotValuesImage(peakMatrix, allClusImages)
View(clusImages)
source('~/GitHub/rMSIteachings/initialPlotter.R', echo=TRUE)
source('~/GitHub/rMSIteachings/initialPlotter.R', echo=TRUE)
View(clusImages)
# Insert where your data is located
wDir <- "C:/Users/jordi/Desktop/Metabolomica/Projecte MALDI/CollCap/"
# Insert the name of the peak matrix .zip
peakData <- "mergeddata-peaks.zip"
# Here we extract the Peak Matrix from the .zip and create and object with all the data assigned to peakMatrix
peakMatrix <- rMSIproc::LoadPeakMatrix(file.path(wDir, peakData))
source('~/GitHub/rMSIteachings/initialPlotter.R', echo=TRUE)
View(plot)
source('~/GitHub/rMSIteachings/initialPlotter.R', echo=TRUE)
source('~/GitHub/rMSIteachings/initialPlotter.R', echo=TRUE)
library(ggplot2)
ggplotly
?ggplotly
install.packages("plotly")
source('~/GitHub/rMSIteachings/initialPlotter.R', echo=TRUE)
plotly::ggplotly(initialPlotter(peakMatrix, 40, 2))
initialPlotter(peakMatrix, 40, 2))
initialPlotter(peakMatrix, 40, 2)
View(peakMatrix)
initialPlotter(peakMatrix, 40, 0)
initialPlotter(peakMatrix, 40, 0)
source('~/GitHub/rMSIteachings/initialPlotter.R', echo=TRUE)
initialPlotter(peakMatrix, 45, 0)
initialPlotter(peakMatrix, 46, 0)
initialPlotter(peakMatrix, 50, 0)
initialPlotter(peakMatrix, 600, 0)
initialPlotter(peakMatrix, 555, 0)
initialPlotter(peakMatrix, 500, 0)
plotly::ggplotly(initialPlotter(peakMatrix, 500, 0))
plotly::ggplotly(initialPlotter(peakMatrix, 500, 4))
plotly::ggplotly(initialPlotter(peakMatrix, 500, 3))
plotly::ggplotly(initialPlotter(peakMatrix, 500, 2))
plotly::ggplotly(initialPlotter(peakMatrix, 500, 1))
plotly::ggplotly(initialPlotter(peakMatrix, 500, 0))
plotly::ggplotly(initialPlotter(peakMatrix, 500, 2))
plotly::ggplotly(initialPlotter(peakMatrix, 500, 0))
plotly::ggplotly(initialPlotter(peakMatrix, 500, 1))
sum(peakMatrix$numPixels[1:(2-1)])+1)
sum(peakMatrix$numPixels[1:(2-1)])+1
(sum(peakMatrix$numPixels[1:2]
sum(peakMatrix$numPixels[1:2]
sum(peakMatrix$numPixels[1:2])
intensityMatrix[855:1931]
intensityMatrix <- peakMatrix$intensity
intensityMatrix[855:1931]
length(intensityMatrix[855:1931])
